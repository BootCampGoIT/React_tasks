
# lesson5: "Rest API";
    Task 1. Регистрация и создание нового проекта на платформе Firebase.
        - создайте аккаунт на платформе или войдите под сущестующим gmail.
        - создайте новый проект.
        - создайте базу данных Realtime Database
      
    
    Task 2. Создание HTTP-запросов в проекте.
        - в папке src создайте подпапку services, а в ней файл api.js. В этом файле, на данном этапе будут хранится запросы для работы с БД. 
        - с платформы firebase скопируйте базовый url вашей базы данных и в файле api.js создайте соответствующую переменную.
        - создайте запросы для выполнения следующих действий:
            -- добавление нового объявления.
            -- удаление существующего объявления.
            -- добавление заказов из корзины пользователя. 
            -- получение объявлений.
        
        Для создания запроса необходимо:
            - установить библиотеку axios
            - импортировать axios в файле api.js
        
        Условия для создания запросов:
            1. Запрос на добавление одного объявления:
                - название: createNewAdv.
                - метод: POST.
                - путь к папке в базе данных: advertisements/${название категории}.json
                - передаваемые данные: объект

                Пример:
                    export const createNewAdv = (category, newAdv) => {
                    axios
                        .post(baseURL + `advertisements/${category}.json`, newAdv)
                        .then((response) => console.log(response));
                    }

            2. Запрос на удаление одного объявления:
                - название: deleteAdv.
                - метод: DELETE.
                - путь к папке в базе данных: advertisements/${id вашего объявления}.json
                

                Пример:
                    export const deleteAdv = (category, id) => {
                    axios
                        .delete(baseURL + `advertisements/${category}/${id}.json`)
                        .then((response) => console.log(response));
                    };

            3. Запрос на добавление заказов из корзины пользователя
                - название: createNewOrder.
                - метод: POST.
                - путь к папке в базе данных: orders.json
                - передаваемые данные: объект

                Пример:
                    export const createNewOrder = (order) => {
                        axios
                            .post(baseURL + "orders.json", order)
                            .then((response) => console.log(response));
                    };

            4. Запрос на получение всех объявлений
                - название: getAllAdvByCategory.
                - метод: GET.
                - путь к папке в базе данных: advertisements/${category}.json

                export const getAllAdvByCategory = (category) => {
                axios
                    .get(baseURL + `advertisements/${category}.json`)
                    .then((response) => console.log(response));
                };

            - протестируйте запросы.
            - произведите рефакторинг существующих запросов используя конструкцию try/catch. Целесообразно использовать также использовать async/await. 
            Таким образом, после рефакторинга, код будет выглядеть следующим образом:

                import axios from "axios";

                const baseURL = "https://reactmaps-1556023014107-default-rtdb.firebaseio.com/";

                export const createNewAdv = async (category, newAdv) => {
                try {
                    const response = await axios.post(
                    baseURL + `advertisements/${category}.json`,
                    newAdv
                    );
                    return response.data;
                } catch (error) {
                    console.log(error);
                }
                };

                export const deleteAdv = async (category, id) => {
                try {
                    await axios.delete(baseURL + `advertisements/${category}/${id}.json`);
                } catch (error) {
                    console.log(error);
                }
                };

                export const createNewOrder = async (order) => {
                try {
                    await axios.post(baseURL + "orders.json", order);
                } catch (error) {
                    console.log(error);
                }
                };

                export const getAllAdvByCategory = async (category) => {
                try {
                    const response = await axios.get(
                    baseURL + `advertisements/${category}.json`
                    );
                    return response.data;
                } catch (error) {
                    console.log(error);
                }
                }; 

    Task 3. Отправка запросов В компоненте AdvForm для создания нового объявления
        - в файле AdvForm при событии onHandleSubmit вызвать функцию createNewAdv и передать в нее соответсвтующие агрументы(категорию и сам объект).
        - в соответствии с получаемыми данными (в ответ приходит объект), произвести рефакторинг так, чтобы из объекта 
        {name: "-McDXHdmxxmqJU7hr0a8"} взять этот ключ и передать его в функцию, которая отвечает за сохранение объекта локально. Теперь вместо библиотеки uuid должен возвращаться ключ, который соответствует свойству name.
        - проверьте корректность работы приложения.

    Task 4. Получение данных о продуктах для соответствующих категорий.
        - Ранее, данные о продуктах содержались в папке data и импортировались в соответствующие компоненты. Теперь, компоненты будут сами отвечать за получение данных.
        - Произведите рефакторинг компонентов PhoneList и LaptopList следующим образом: 
            -- перепишите компонент на классовый.
            -- в стейте создайте свойство, которое соответствует получаемым данным. (пусть они остануться похожими на те данные, которые формировались ранее).
            -- методы, которые получались или передавались ранее перепишите в соотвествии с правилами использования классовго компонента.
            -- в методе жизненого цикла(его тоже необходимо сделать с конструкцией async/await) выполнить запрос на получение данных о продуктах соответсвующей категории. Полученный ответ записать в переменную
            -- Данные, полученные в ответ от сервера, необходимо преобразовать в привычный формат - массив. 
                Пример:
                    async componentDidMount() {
                        const response = await getAllAdvByCategory("phones");
                        const phones = Object.keys(response).map((key) => ({
                        id: key,
                        ...response[key],
                        }));
                    }
            -- Добавьте проверку, что Вы получаете в ответ данные. Отработайте ошибку, если в ответ придет null. Для этого можно добавить в стейт соответсвующее свойство {error: "К сожалению товары по данной категории отстутствуют"}. Пока массив пустой, пусть выводится сообщеие, что товаров нет. 
            -- запишите данные в стейт компонента
            -- Произведите рефакторинг обоих компонентов 
            -- Проверьте работоспособность приложения. 
            -- И да, мы видим проблемы! Проблема заключается в том, что компоненты списков абсолютно не взаимодействуют с компонентом формы добавления товара, так как созданы в разных компонентах. Это важно и проблема была создана умышленно с учебной целью, но она была бы решена, если бы мы использовали библиотеку redux. А пока, так как библиотек будем изучать всего через несколько занятий, для того чтобы решить проблему, нам необходимо произвести рефакторинг нашего кода. Это следующее задание.
        
        Task 4. Исправление проблем!!!
            - Измените стейт компонента Main следующим образом:
                    state = {
                        cart: [],
                        phones: [],
                        laptops: [],
                        error: "К сожалению товары по данной категории отстутствуют",
                    };
            - Создайте в компоненте Main два метода getPhones и getLaptops
            - Перенесите в созданные методы все содержимое, которое у вас было в методах жизненого цикла componentDidMount компонентов PhoneList и LaptopList. 
            - Создайте метод componentDidMount в компоненте Main и вызовите методы getPhones и getLaptops  
            - Произведите рефакторинг компонентов так, чтобы все данные, которые компоненты PhoneList и LaptopList, получались из пропов.
            - Проверьте работоспособность приложения.
        
        Task 5. Добавление заказов пользователя из корзины.
            - в компоненте Main cоздайте метод createOrder, который будет отвечать за отправку заказа.
            - Добавьте запрос на отправку заказа (createNewOrder из файла api.js). Передайте в него соответствующие данные. В этом же методе (createOrder) вызовите метод очистки содержимого корзины (removeAllFromCart)
            - замените removeAllFromCart, который передается в пропах на createOrder по всей цепочке компонентов до самой кнопки, на которой будет отрабатывать создание заказа.
            - Проверьте работоспособность приложения.
            



        



    



        
    
    